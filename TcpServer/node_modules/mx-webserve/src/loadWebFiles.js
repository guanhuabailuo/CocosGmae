"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.loadModule = void 0;
const fs_1 = require("fs");
const path_1 = require("path");
// 这里提供加载所有web模块的能力
function loadModule(dir) {
    loadDir(dir);
}
exports.loadModule = loadModule;
function loadDir(dir) {
    let files = fs_1.readdirSync(dir);
    for (let i = 0; i < files.length; i++) {
        let target = path_1.join(dir, files[i]);
        if (fs_1.statSync(target).isDirectory()) {
            loadDir(target);
        }
        else {
            loadFile(target);
        }
    }
}
let loadSet = new Set();
function loadFile(filePath) {
    let lPath = path_1.parse(filePath);
    let mPath = path_1.join(lPath.dir, lPath.name);
    try {
        if (loadSet.has(mPath))
            return;
        require(mPath);
        loadSet.add(mPath);
    }
    catch (e) {
        if (lPath.ext == ".ts" || lPath.ext == ".js") {
            console.error(e);
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9hZFdlYkZpbGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibG9hZFdlYkZpbGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDJCQUErRDtBQUMvRCwrQkFBbUM7QUFFbkMsbUJBQW1CO0FBQ25CLFNBQWdCLFVBQVUsQ0FBQyxHQUFXO0lBQ2xDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQTtBQUNoQixDQUFDO0FBRkQsZ0NBRUM7QUFFRCxTQUFTLE9BQU8sQ0FBQyxHQUFXO0lBQ3hCLElBQUksS0FBSyxHQUFHLGdCQUFXLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDNUIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDbkMsSUFBSSxNQUFNLEdBQUcsV0FBSSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNoQyxJQUFJLGFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLEVBQUUsRUFBRTtZQUNoQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUE7U0FDbEI7YUFDSTtZQUNELFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQTtTQUNuQjtLQUNKO0FBRUwsQ0FBQztBQUVELElBQUksT0FBTyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7QUFFeEIsU0FBUyxRQUFRLENBQUMsUUFBZ0I7SUFDOUIsSUFBSSxLQUFLLEdBQUcsWUFBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzVCLElBQUksS0FBSyxHQUFHLFdBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUN2QyxJQUFJO1FBQ0EsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQztZQUFFLE9BQU87UUFDL0IsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQ2QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtLQUNyQjtJQUNELE9BQU8sQ0FBQyxFQUFFO1FBQ04sSUFBRyxLQUFLLENBQUMsR0FBRyxJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsR0FBRyxJQUFJLEtBQUssRUFBQztZQUN4QyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO1NBQ25CO0tBQ0o7QUFDTCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVhZEZpbGVTeW5jLCByZWFkZGlyU3luYywgc3RhdCwgc3RhdFN5bmMgfSBmcm9tIFwiZnNcIjtcbmltcG9ydCB7IGpvaW4sIHBhcnNlIH0gZnJvbSBcInBhdGhcIjtcblxuLy8g6L+Z6YeM5o+Q5L6b5Yqg6L295omA5pyJd2Vi5qih5Z2X55qE6IO95YqbXG5leHBvcnQgZnVuY3Rpb24gbG9hZE1vZHVsZShkaXI6IHN0cmluZykge1xuICAgIGxvYWREaXIoZGlyKVxufVxuXG5mdW5jdGlvbiBsb2FkRGlyKGRpcjogc3RyaW5nKSB7XG4gICAgbGV0IGZpbGVzID0gcmVhZGRpclN5bmMoZGlyKVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHRhcmdldCA9IGpvaW4oZGlyLCBmaWxlc1tpXSlcbiAgICAgICAgaWYgKHN0YXRTeW5jKHRhcmdldCkuaXNEaXJlY3RvcnkoKSkge1xuICAgICAgICAgICAgbG9hZERpcih0YXJnZXQpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsb2FkRmlsZSh0YXJnZXQpXG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxubGV0IGxvYWRTZXQgPSBuZXcgU2V0KCk7IFxuXG5mdW5jdGlvbiBsb2FkRmlsZShmaWxlUGF0aDogc3RyaW5nKSB7XG4gICAgbGV0IGxQYXRoID0gcGFyc2UoZmlsZVBhdGgpO1xuICAgIGxldCBtUGF0aCA9IGpvaW4obFBhdGguZGlyLCBsUGF0aC5uYW1lKVxuICAgIHRyeSB7XG4gICAgICAgIGlmIChsb2FkU2V0LmhhcyhtUGF0aCkpIHJldHVybjtcbiAgICAgICAgcmVxdWlyZShtUGF0aClcbiAgICAgICAgbG9hZFNldC5hZGQobVBhdGgpXG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGlmKGxQYXRoLmV4dCA9PSBcIi50c1wiIHx8IGxQYXRoLmV4dCA9PSBcIi5qc1wiKXtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSlcbiAgICAgICAgfVxuICAgIH1cbn0iXX0=